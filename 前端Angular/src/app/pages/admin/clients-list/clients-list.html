<h2>æœƒå“¡æ¸…å–®</h2>

<!-- æ–°å¢æœƒå“¡ -->
<div class="add-client-form">
  <input [(ngModel)]="newClient.name" placeholder="å§“å" />
  <input [(ngModel)]="newClient.email" placeholder="Email" type="email" />
  <input [(ngModel)]="newClient.photoURL" placeholder="é ­åƒ URL" />
  <button (click)="addClient()">æ–°å¢æœƒå“¡</button>
</div>

<!-- æœƒå“¡æ¸…å–® -->
<table class="client-table">
  <thead>
    <tr>
      <th>ID</th>
      <th>å§“å</th>
      <th>Email</th>
      <th>é ­åƒ</th>
      <th>è¨»å†Šæ™‚é–“</th>
      <th>æ›´æ–°æ™‚é–“</th>
      <th>æ“ä½œ</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let c of clients$ | async">
      <!-- ç·¨è¼¯æ¨¡å¼ -->
      <ng-container *ngIf="editMode === c.id && editClient; else viewMode">
        <td>{{ c.id }}</td>
        <td><input [(ngModel)]="editClient.name" /></td>
        <td><input [(ngModel)]="editClient.email" type="email" /></td>
        <td><input [(ngModel)]="editClient.photoURL" placeholder="é ­åƒ URL" /></td>
        <td>
          {{ editClient.createdAt?.seconds * 1000 | date: "yyyy/MM/dd HH:mm" }}
        </td>
        <td>
          {{ editClient.updatedAt?.seconds * 1000 | date: "yyyy/MM/dd HH:mm" }}
        </td>
        <td>
          <button (click)="updateClient()">å„²å­˜</button>
          <button (click)="cancelEdit()">å–æ¶ˆ</button>
        </td>
      </ng-container>

      <!-- æª¢è¦–æ¨¡å¼ -->
      <ng-template #viewMode>
        <td>{{ c.id }}</td>
        <td>{{ c.name }}</td>
        <td>{{ c.email }}</td>
        <td>
          <img
            *ngIf="c.photoURL"
            [src]="c.photoURL"
            alt="é ­åƒ"
            width="40"
            height="40"
            style="border-radius: 50%"
          />
        </td>
        <td>{{ c.createdAt?.seconds * 1000 | date: "yyyy/MM/dd HH:mm" }}</td>
        <td>{{ c.updatedAt?.seconds * 1000 | date: "yyyy/MM/dd HH:mm" }}</td>
        <td>
          <button (click)="startEdit(c)">ç·¨è¼¯</button>
          <button (click)="deleteClient(c.id!)">åˆªé™¤</button>
          <!-- âœ… æ–°å¢ï¼šå¯«å…¥è†šè³ªçµæœ -->
          <!-- <button (click)="assignSkinResult(c.id!)">ğŸ§´ å¯«å…¥è†šè³ªçµæœ</button> -->
        </td>
      </ng-template>
    </tr>
  </tbody>
</table>
